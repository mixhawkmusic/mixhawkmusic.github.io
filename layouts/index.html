{{ define "main" }}
<!-- Main / Hero -->
<section id="home" class="section hero" aria-label="Main" itemscope itemtype="https://schema.org/MusicGroup">
  <div class="wrap">
    <div class="hero-content">
      <h1 class="hero-title" itemprop="name"><span>Mix Hawk</span></h1>
      <p class="tagline" itemprop="genre">{{ .Params.tagline }}</p>
      <div class="cta-row">
        <a class="btn btn-ghost" href="#music">Listen</a>
        <a class="btn btn-solid" href="#bio">About</a>
      </div>
      <div class="social">
        {{ partial "social-links.html" . }}
      </div>
      <div class="support-music">
        <stripe-buy-button
          buy-button-id="buy_btn_1SDaoLIwZfiUtlazCqvroyJb"
          publishable-key="pk_live_51SDaOJIwZfiUtlazwyo077Qh7xD6nWDYhGZvb00GKTgfU8Ek5cSbBKxGaw6mFDvrZ09n1nzsZGd4bGg5AWyUgMV800nW9dGZmn"
        >
        </stripe-buy-button>
      </div>
      {{ with .Params.hero_video }}
      <div class="video-container" itemprop="video" itemscope itemtype="https://schema.org/VideoObject">
        <meta itemprop="name" content="Mix Hawk - Featured Video" />
        <meta itemprop="description" content="Watch Mix Hawk's country music performance" />
        <meta itemprop="uploadDate" content="{{ now.Format "2006-01-02" }}" />
        <iframe width="560" height="315" src="{{ . }}" title="Mix Hawk Country Music Video - Official Performance" style="border:0;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen loading="lazy"></iframe>
      </div>
      {{ end }}
    </div>
  </div>
  <div class="texture" aria-hidden="true"></div>
</section>

<!-- Bio -->
<section id="bio" class="section section-paper" aria-label="Bio" itemscope itemtype="https://schema.org/Person">
    <meta itemprop="givenName" content="Mix" />
    <meta itemprop="familyName" content="Hawk" />
  <div class="wrap">
    <div class="paper">
      <h2>Bio</h2>
      {{ with .Params.bio_image }}
        <img alt="Mix Hawk - Country Singer and Songwriter Portrait from Tulsa Oklahoma" src="{{ . | relURL }}" height="1037" width="1536" itemprop="image" loading="lazy"/>
      {{ end }}
      <div itemprop="description">
        {{ .Content }}
      </div>
    </div>
  </div>
</section>

<!-- Music -->
<section id="music" class="section section-music" aria-label="Music" itemscope itemtype="https://schema.org/MusicAlbum">
  <div class="wrap">
    <h2>Music</h2>
    <div class="tabs music-tabs">
      <button class="tab-button active" data-service="spotify">Spotify</button>
      <button class="tab-button" data-service="apple">Apple Music</button>
      <button class="tab-button" data-service="reverbnation">ReverbNation</button>
    </div>
    <div class="tracks">
      {{ range .Site.Data.music.tracks }}
      <article class="track" itemscope itemtype="https://schema.org/MusicRecording">
        <h3 itemprop="name">{{ .title }}</h3>
        <meta itemprop="byArtist" content="Mix Hawk" />
        <div class="tab-content">
          {{ if .spotify }}
          <div class="music-player" data-service="spotify">
            <iframe style="border-radius:12px; border:0;" src="{{ .spotify }}" width="100%" height="152" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" title="Spotify Player"></iframe>
          </div>
          {{ end }}
          {{ if .apple }}
          <div class="music-player" data-service="apple" style="display:none;">
            <iframe allow="autoplay *; encrypted-media *; fullscreen *; clipboard-write" style="width:100%;max-width:660px;overflow:hidden;border-radius:10px;border:0;" height="175" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="{{ .apple }}" title="Apple Music Player"></iframe>
          </div>
          {{ end }}
          {{ if .reverbnation }}
          <div class="music-player" data-service="reverbnation" style="display:none;">
            <iframe width="100%" height="150" src="{{ .reverbnation }}" style="min-width:100%;max-width:100%;border:0;" title="ReverbNation Player"></iframe>
          </div>
          {{ end }}
        </div>
      </article>
      {{ end }}
    </div>
  </div>
</section>

<!-- Videos -->
<section id="videos" class="section section-video" aria-label="Videos">
  <div class="wrap">
    <h2>Videos</h2>
    {{ range .Site.Data.videos.list }}
    <div class="video-container" itemscope itemtype="https://schema.org/VideoObject">
      <meta itemprop="name" content="Mix Hawk Music Video" />
      <meta itemprop="description" content="Official music video by Mix Hawk" />
      <meta itemprop="uploadDate" content="{{ now.Format "2006-01-02" }}" />
      <iframe width="560" height="315" src="{{ .url }}" title="Mix Hawk Country Music Video - {{ .url }}" style="border:0;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen loading="lazy"></iframe>
    </div>
    {{ end }}
  </div>
</section>

<!-- Gallery -->
<section id="gallery" class="section section-gallery" aria-label="Photo Gallery" itemscope itemtype="https://schema.org/ImageGallery">
  <div class="wrap">
    <h2><span itemprop="name">Gallery</span></h2>

    <!-- Gallery Category Tabs -->
    <div class="tabs gallery-tabs">
      {{ if .Site.Params.gallery.showAllTab }}
      <button class="tab-button active" data-gallery="all">All</button>
      {{ end }}
      {{ $sortedGalleries := slice }}
      {{ range $key, $value := .Site.Data.galleries }}
      {{ $sortedGalleries = $sortedGalleries | append (dict "key" $key "gallery" (index $.Site.Data.galleries $key)) }}
      {{ end }}
      {{ $sortedGalleries = sort $sortedGalleries "gallery.order" }}
      {{ range $sortedGalleries }}
      {{ if not $.Site.Params.gallery.showAllTab }}
        <button class="tab-button{{ if eq .gallery.order 1 }} active{{ end }}" data-gallery="{{ .gallery.slug }}">{{ .gallery.name }}</button>
      {{ else }}
        <button class="tab-button" data-gallery="{{ .gallery.slug }}">{{ .gallery.name }}</button>
      {{ end }}
      {{ end }}
    </div>

    <div class="gallery-grid" id="galleryGrid">
      <meta itemprop="name" content="Mix Hawk Photo Gallery" />
      <meta itemprop="description" content="Official Mix Hawk Music Photos" />

      <!-- Render all images from all galleries, sorted by index -->
      {{ $sortedGalleries := slice }}
      {{ range $key, $value := .Site.Data.galleries }}
      {{ $sortedGalleries = $sortedGalleries | append (dict "key" $key "gallery" (index $.Site.Data.galleries $key)) }}
      {{ end }}
      {{ $sortedGalleries = sort $sortedGalleries "gallery.order" }}
      {{ range $sortedGalleries }}
      {{ $gallery := .gallery }}
      {{ $sortedImages := sort $gallery.images "index" }}
      {{ range $sortedImages }}
      <figure class="gallery-item" data-category="{{ $gallery.slug }}" itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
        {{ $image := resources.Get .url }}
        {{ $imageUrl := .url | relURL }}
        {{ if $image }}{{ $imageUrl = $image.RelPermalink }}{{ end }}
        <a href="{{ $imageUrl }}" data-index="{{ .index }}">
          <img loading="lazy" src="{{ $imageUrl }}" alt="{{ if .alt }}{{ .alt }}{{ else }}Mix Hawk country music performance photo{{ end }}" itemprop="contentUrl">
          <meta itemprop="name" content="{{ if .alt }}{{ .alt }}{{ else }}Mix Hawk Photo{{ end }}" />
        </a>
      </figure>
      {{ end }}
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
